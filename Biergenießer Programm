#include <LiquidCrystal.h> 
#include <IRremote.h> 
 
int RECV_PIN = 31; 
IRrecv irrecv(RECV_PIN); 
decode_results results; 
LiquidCrystal lcd(30,36,42,44,45,43); 
 
void setup()  
{ 
  Serial.begin(9600); 
  lcd.begin(16,2); 
  irrecv.enableIRIn();                                    //Reciever starten 
  
 
} 
 
void loop()  
{ 
 while(results.value != 16761405)                         //Schleife, um Eingabe zu beginnen, bzw Aufforderung bis Eingabe getätigt wurde 
  { 
   lcd.setCursor(0,0); 
   lcd.print("Eingabe bitte");                            //Aufforderung zur Eingabe auf dem Display 
    
   if (irrecv.decode(&results))                           //Decodieren des IR-Signals zur Überprüfung 
    { 
      Serial.println(results.value, DEC);                 //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
      irrecv.resume();                                    //Den nächsten Wert emfangen 
    } 
       
   if(results.value == 16738455) 
    {  
       lcd.clear(); 
       lcd.setCursor(0,0);                                //Erste Zeile 
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);                                //Zweite Zeile 
       lcd.print("1.Thore"); 
       delay (2000);                                      //2 Sekunden warten 
       lcd.clear();                                       //Display löschen 
 
       lcd.setCursor(0,0);          
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);          
       lcd.print("2.Laura1"); 
       delay (2000);               
       lcd.clear();                 
 
       lcd.setCursor(0,0);          
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);          
       lcd.print("3.Laura2"); 
       delay (2000);                
       lcd.clear(); 
 
       lcd.setCursor(0,0);          
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);          
       lcd.print("4.Jonathan"); 
       delay (2000);                
       lcd.clear(); 
 
       lcd.setCursor(0,0);          
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);          
       lcd.print("5.Lukas"); 
       delay (2000);                
       lcd.clear(); 
 
       lcd.setCursor(0,0);          
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);          
       lcd.print("6.Dominik"); 
       delay (2000);                
       lcd.clear(); 
 
       lcd.setCursor(0,0);          
       lcd.print("Menueauswahl: "); 
       lcd.setCursor(0,1);          
       lcd.print("7.Thore2"); 
       delay (2000);                
       lcd.clear(); 
    } 
   
  if(results.value == 16724175)                           //Thores Quelltext, Programm Nr.1 
    {  
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
       
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
            lcd.setCursor(0,0); 
            lcd.print("Thores Pro");                      //Programmplatzhalter 
             
              if (irrecv.decode(&results))                //Eingabe zum Beenden am Ende des Programms 
                { 
                  Serial.println(results.value, DEC);     //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                  irrecv.resume();                        //Den nächsten Wert emfangen 
                }   
          } 
    }  
  if(results.value==16718055)                             //Lauras Quelltext, Programm Nr.2 
    { 
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
       
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
            lcd.setCursor(0,0); 
            lcd.print("Prinzessin");                      //Programmplatzhalter 
             
              if (irrecv.decode(&results)) 
                { 
                  Serial.println(results.value, DEC);     //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                  irrecv.resume();                        //Den nächsten Wert emfangen 
                } 
           } 
    } 
 
 
  if (results.value==16743045)                            //Laura2 Quelltext, Programm Nr.3 
    { 
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
       
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
            lcd.setCursor(0,0); 
            lcd.print("Prinzessin2");                        //Programmplatzhalter 
             
               if (irrecv.decode(&results))  
                 { 
                  Serial.println(results.value, DEC);     //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                  irrecv.resume();                        //Den nächsten Wert emfangen 
                 } 
          } 
    } 
 
 
  if(results.value==16716015)                             //Jonathan Quelltext, Programm Nr.4 
    { 
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
    
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
              lcd.setCursor(0,0); 
              lcd.print("Engel <3");                        //Programmplatzhalter 
             
             
              if (irrecv.decode(&results))  
                { 
                 Serial.println(results.value, DEC);      //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                 irrecv.resume();                         //Den nächsten Wert emfangen 
                } 
          } 
    } 
 
  if(results.value==16726215)                             //Lukas Quelltext, Programm Nr.5 
    { 
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
       
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
            lcd.setCursor(0,0); 
            lcd.print("Kampfstachel");                       //Programmplatzhalter 
               
              if (irrecv.decode(&results))  
                { 
                 Serial.println(results.value, DEC);      //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                 irrecv.resume();                         //Den nächsten Wert emfangen  
                } 
          } 
    } 
  if(results.value==16734885)                             //Dominik Quelltext, Programm Nr.6 
    { 
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
       
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
            a = 10;
            b = 10;
            c = 10;
            g = 10;
  
            Serial.println(a);
            Serial.println(b);
            Serial.println(c);
            Serial.println(d);
 
                  while(a == 10)
                  { lcd.setCursor(0,0);
                    lcd.print("Datum angeben");
                    lcd.setCursor(0,1);
                    lcd.print("Im Format XX.XX");
                    
                    if (irrecv.decode(&results)) {
                    Serial.println(results.value, DEC); //Ausgabe des Wertes als DEC-Zahl
                    irrecv.resume(); // Den nächsten Wert emfangen

                    if (results.value == 16738455)
                    {a = 0;}
                    if (results.value == 16724175)
                    { a = 1;}
                    if (results.value == 16718055)
                    { a = 2;}
                    if (results.value == 16743045)
                    { a = 3;}
                      }
                  }

                  while(b == 10)
                  { lcd.setCursor(0,0);
                    lcd.print("Datum angeben");
                    lcd.setCursor(0,1);
                    lcd.print("Im Format ");
                    lcd.print(a);
                    lcd.print("X.XX");
                    
                    if (irrecv.decode(&results)) {
                    Serial.println(results.value, DEC); //Ausgabe des Wertes als DEC-Zahl
                    irrecv.resume(); // Den nächsten Wert emfangen
                    
                    if (results.value == 16738455)
                    {b = 0;}
                    if (results.value == 16724175)
                    { b = 1;}
                    if (results.value == 16718055)
                    { b = 2;}
                    if (results.value == 16743045)
                    { b = 3;}
                    if (results.value == 16716015)
                    { b = 4;}
                    if (results.value == 16726215)
                    { b = 5;}
                    if (results.value == 16734885)
                    { b = 6;}
                    if (results.value == 16728765)
                    { b = 7;}
                    if (results.value == 16730805)
                    { b = 8;}
                    if (results.value == 16732845)
                    { b = 9;}
                      }  
                  }

              while(c == 10)
                  { lcd.setCursor(0,0);
                    lcd.print("Datum angeben");
                    lcd.setCursor(0,1);
                    lcd.print("Im Format ");
                    lcd.print(a);
                    lcd.print(b);
                    lcd.print(".XX");
                    
                    if (irrecv.decode(&results)) {
                    Serial.println(results.value, DEC); //Ausgabe des Wertes als DEC-Zahl
                    irrecv.resume(); // Den nächsten Wert emfangen

                    if (results.value == 16738455)
                    {c = 0;}
                    if (results.value == 16724175)
                    { c = 1;}
                  
                      }
                  }

              while(g == 10)
                  { lcd.setCursor(0,0);
                    lcd.print("Datum angeben");
                    lcd.setCursor(0,1);
                    lcd.print("Im Format ");
                    lcd.print(a);
                    lcd.print(b);
                    lcd.print(".");
                    lcd.print(c);
                    lcd.print("X");
                    
                    if (irrecv.decode(&results)) {
                    Serial.println(results.value, DEC); //Ausgabe des Wertes als DEC-Zahl
                    irrecv.resume(); // Den nächsten Wert emfangen

                    if (results.value == 16738455)
                    {g = 0;}
                    if (results.value == 16724175)
                    { g = 1;}
                    if (results.value == 16718055)
                    { g = 2;}
                    if (results.value == 16743045)
                    { g = 3;}
                    if (results.value == 16716015)
                    { g = 4;}
                    if (results.value == 16726215)
                    { g = 5;}
                    if (results.value == 16734885)
                    { g = 6;}
                    if (results.value == 16728765)
                    { g = 7;}
                    if (results.value == 16730805)
                    { g = 8;}
                    if (results.value == 16732845)
                    { g = 9;}
                      }
                  }


              lcd.clear();
                
                lcd.setCursor(0,0);
                lcd.print("Datum: ");
                lcd.print(a);
                lcd.print(b);
                lcd.print(".");
                lcd.print(c);
                lcd.print(g);
                lcd.print(".");
                
              delay(5000);

               
              if (irrecv.decode(&results))  
                { 
                 Serial.println(results.value, DEC);      //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                 irrecv.resume();                         //Den nächsten Wert emfangen  
                } 
          } 
    } 
    if(results.value==16728765)                             //Thore2 Quelltext, Programm Nr.7 
    { 
      lcd.clear();                                        //Eingabeaufforderung auf dem Display löschen 
       
        while(results.value != 16761405)                  //Schleife des Programms bis zu manuellen Beendigung mit der "Play"-Taste 
          { 
            lcd.setCursor(0,0); 
            lcd.print("Thore2");                       //Programmplatzhalter 
               
              if (irrecv.decode(&results))  
                { 
                 Serial.println(results.value, DEC);      //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
                 irrecv.resume();                         //Den nächsten Wert emfangen  
                } 
          } 
    } 
  }  
 
    
 lcd.clear();                                             //Letzten Text vom gestarteten Programm auf dem Display löschen 
 lcd.setCursor(0,0); 
 lcd.print("Systemneustart");                             //Mitteilung an den Nutzer, dass gleich ein neues Programm gestartet werden kann 
 lcd.setCursor(0,1); 
 lcd.print("Bitte warten"); 
  
 delay(5000); 
 lcd.clear();                                             //Mitteilung vor Ende des Loops löschen 
  
 while(results.value == 16761405)                         //Schleife, um den Wert von "results" automatisch zu verändern 
  {                                                       //Sodass results.value nicht mehr den Wert der "Play"-Taste zugewiesen hat 
   if (irrecv.decode(&results)) 
    { 
     Serial.println(results.value, DEC);                  //Ausgabe des Wertes als DEC-Zahl auf dem seriellen Monitor 
     irrecv.resume();                                     //Den nächsten Wert emfangen 
    } 
  } 
  
}


void berechnung_sonnenaufgang()
{
if(c == 0 && g == 1)
{ e=0;}
if(c == 0 && g == 2)
{ e=31;}
if(c == 0 && g == 3)
{ e=59;}
if(c == 0 && g == 4)
{ e=90;}
if(c == 0 && g == 5)
{ e=120;}
if(c == 0 && g == 6)
{ e=151;}
if(c == 0 && g == 7)
{ e=181;}
if(c == 0 && g == 8)
{ e=212;}
if(c == 0 && g == 9)
{ e=243;}
if(c == 1 && g == 0)
{ e=273;}
if(c == 1 && g == 1)
{ e=304;}
if(c == 1 && g == 2)
{ e=334;}

f = a*10 + b;

TagZahl = e + f;


//Berechnung Uhrzeit Braunschweig liegt auf 10.53° Ost und 52.27° Nord

//GeoB = pi * 52.27 / 180

//Deklination der Sonne
Dek = 0.4095*sin(0.016906*( TagZahl - 80.086));

//Zeitdifferenz und wahre Ortszeit

WOZ = 12 - (12*acos((sin(h)-sin(GeoB)*sin(Dek))/(cos(GeoB)*cos(Dek)))/pi);

//MOZ

MOZ = WOZ + 0.171*sin(0.0337*TagZahl+0.465)+ 0.1299*sin(0.01787*TagZahl-0.168);
if(TagZahl >= 90 && TagZahl <= 300)
{
x = MOZ - 10.53/15 +2;
}
else
x = MOZ - 10.53/15 +1;

Std = x;
Minu = (x - Std) * 60;

Serial.println(Dek);
Serial.println(WOZ);
Serial.println(MOZ);
Serial.println(x);
Serial.println(Std);
Serial.println(Minu);
}